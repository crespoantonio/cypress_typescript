name: On push to branch

on:
  push:
    branches:
      - cicdconfiguration

jobs:
      build:
        runs-on: ubuntu-latest

        steps:
          - name: Checkout Repository
            uses: actions/checkout@v2

          - name: Set up Node.js
            uses: actions/setup-node@v3
            with:
              node-version: 14

          - name: Install Dependencies
            run: npm install

          - name: Write the cypress.env.json file 📝
            # use quotes around the secret, as its value
            # is simply inserted as a string into the command
            run: |
              echo '${{ secrets.CYPRESS_ENV }}' > cypress.env.json

          - name: Run Tests
            run: npm run cypress:run
